# Shared storage for all pipeline pods (FlashBlade or SSD).
# All pods mount this at /mnt/flashblade and use separate subdirs for read/write:
#   - queue/raw-transactions/*     (data-gather writes → preprocessing reads)
#   - queue/features-ready/*       (preprocessing writes → inference reads)
#   - queue/inference-results/*    (inference writes)
#   - queue/training-queue/*       (training reads/writes)
#   - raw-data, features, models, inference-logs (StoragePaths)
# No Redis; all communication is file-based on this volume.
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: fraud-pipeline-flashblade
  namespace: fraud-pipeline
  labels:
    app: fraud-pipeline
spec:
  accessModes:
    - ReadWriteOnce   # Works with default StorageClass on Kind/Minikube/Docker Desktop (single-node)
  resources:
    requests:
      storage: 50Gi
  # On single-node clusters all pods share this volume. For multi-node + RWX, switch to ReadWriteMany
  # and use an NFS or cloud file StorageClass.
